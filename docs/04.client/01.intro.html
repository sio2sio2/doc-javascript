


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>4.1. Configuración básica &#8212; documentación de Javascript - </title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="next" title="4.2. Particularidades" href="02.part.html" />
    <link rel="prev" title="4. Programación en el cliente (Webpack)" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="02.part.html" title="4.2. Particularidades"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="4. Programación en el cliente (Webpack)"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">documentación de Javascript - </a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">4. Programación en el cliente (Webpack)</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="configuracion-basica">
<h1>4.1. Configuración básica<a class="headerlink" href="#configuracion-basica" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Lo primero es <a class="reference internal" href="../03.node/01.nodejs.html#prep-workdir"><span class="std std-ref">preparar el directorio de trabajo</span></a> para
después:</p>
<div class="section" id="paquetes">
<h2>4.1.1. Paquetes<a class="headerlink" href="#paquetes" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para todo lo que pretendemos necesitamos al menos los siguientes paquetes:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> npm install --save-dev webpack webpack-dev-server webpack-cli webpack-merge
</pre></div>
</div>
</div>
<div class="section" id="bases-la-de-configuracion">
<h2>4.1.2. Bases la de configuración<a class="headerlink" href="#bases-la-de-configuracion" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Como nuestro objetivo es utilizar <strong class="program">webpack</strong> como aglutinante de nuestro
código, debemos añadir a <code class="file docutils literal notranslate"><span class="pre">package.json</span></code> los siguientes scripts:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;script&quot;</span><span class="o">:</span> <span class="p">{</span>
   <span class="s2">&quot;build&quot;</span><span class="o">:</span> <span class="s2">&quot;webpack --mode production&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Por otra parte, necesitamos un fichero para la configuración de
<strong class="program">webpack</strong> llamado <code class="file docutils literal notranslate"><span class="pre">webpack.config.js</span></code> con una primera
configuración como ésta:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
   <span class="nx">entry</span><span class="o">:</span> <span class="s2">&quot;./src/js/index.js&quot;</span><span class="p">,</span>
   <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&quot;js/[name].bundle.js&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">config</span>
</pre></div>
</div>
<p>Esta configuración simplicísima supone que el punto de entrada de nuestra
aplicación es <code class="file docutils literal notranslate"><span class="pre">src/js/index.js</span></code> y que el resultado de la acción de
<strong class="program">webpack</strong> se guardará en <code class="file docutils literal notranslate"><span class="pre">dist/js/main.bundle.js</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">La configuración hace más de lo que aparenta. No sólo copia el
fichero, sino que lo minimiza; y, si hemos descompuesto nuestro código en
varios ficheros (<a class="reference internal" href="../03.node/03.modulos.html#js-modules"><span class="std std-ref">módulos</span></a>) que se llaman entre sí o
importa librerías de terceros, reunirá todo dentro del mismo fichero.
Para excluir módulos del fichero resultante único, consulte más adelante
<a class="reference internal" href="03.ejemplos.html#webpack-externals"><span class="std std-ref">externals</span></a>.</p>
</div>
<p>El por qué el indicado es el fichero resultante se debe a dos razones:</p>
<ul>
<li><p class="first">Sin configuración adicional, se toma como directorio de resultados
<code class="file docutils literal notranslate"><span class="pre">/dist</span></code>. Veremos más adelante cómo alterar esto.</p>
</li>
<li><p class="first">El nombre es «<em>main</em>», porque la línea que define la entrada es:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">entry</span><span class="o">:</span> <span class="s2">&quot;./src.js/index.js&quot;</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">Ver también</p>
<p class="last">Consulte el apartado sobre <a class="reference internal" href="02.part.html#webpack-entry-point"><span class="std std-ref">la definición del punto de
entrada</span></a> para una explicación del hecho.</p>
</div>
</li>
</ul>
<p>Por último, debemos crear un código de ejemplo en <code class="file docutils literal notranslate"><span class="pre">src/js/index.js</span></code>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">foobar</span> <span class="o">=</span> <span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">text</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">mensaje</span> <span class="o">=</span> <span class="s2">&quot;Esto es una prueba&quot;</span><span class="p">;</span>
<span class="nx">foobar</span><span class="p">(</span><span class="nx">mensaje</span><span class="p">);</span>
</pre></div>
</div>
<p>en que usamos algunas características nuevas de <em>Javascript</em> para ilustrar más
adelante la transpilación con <a class="reference internal" href="02.part.html#babel"><span class="std std-ref">babel</span></a>. Escrito el fichero podemos
obtener el resultado con:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ npm run build
</pre></div>
</div>
<p>que creará el fichero <code class="file docutils literal notranslate"><span class="pre">dist/js/main.bundle.js</span></code>. Si le echamos un vistazo
veremos que el código se encuentra ofuscado y minimizado.</p>
</div>
<div class="section" id="desarrollo">
<h2>4.1.3. Desarrollo<a class="headerlink" href="#desarrollo" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La configuración anterior es un ejemplo tan simple que carece por completo de
utilidad, ya que hace inviable la corrección y depuración del código. Es
necesario, crear al menos dos configuraciones: una apropiada para generar el
resultado para producción y otra para generar un resultado apto para depurar
durante el desarrollo. Para ello vamos a crear así los <em>scripts</em> en
<code class="file docutils literal notranslate"><span class="pre">packages.json</span></code>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;scripts&quot;</span><span class="o">:</span> <span class="p">{</span>
  <span class="s2">&quot;build&quot;</span><span class="o">:</span> <span class="s2">&quot;webpack --config webpack/webpack.production.js&quot;</span><span class="p">,</span>
  <span class="s2">&quot;watch&quot;</span><span class="o">:</span> <span class="s2">&quot;webpack --config webpack/webpack.development.js --watch&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>cuyo sentido es el siguiente:</p>
<ul class="simple">
<li><code class="code docutils literal notranslate"><span class="pre">build</span></code> compone el resultado para usarlo en producción.</li>
<li><code class="code docutils literal notranslate"><span class="pre">watch</span></code> compone el resultado para usarlo mientras desarrollamos,
de modo que se queda expectante a cualquier cambio posterior que hagamos
para recomponer sobre la marcha el resultado.</li>
</ul>
<p>Dentro del directorio de trabajo, debemos también crear un directorio de
configuración para <strong class="program">webpack</strong> con el siguiente contenido:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+ webpack
     +-- webpack.common.js
     +-- webpack.production.js
     +-- webpack.development.js
</pre></div>
</div>
<p><code class="file docutils literal notranslate"><span class="pre">webpack.common.js</span></code> contendrá lo siguiente:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
   <span class="nx">entry</span><span class="o">:</span> <span class="s2">&quot;./src/js/index.js&quot;</span><span class="p">,</span>
   <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&quot;js/[name].bundle.js&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">config</span>
</pre></div>
</div>
<p><code class="file docutils literal notranslate"><span class="pre">webpack.production.js</span></code> esto:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">merge</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;webpack-merge&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">common</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./webpack.common.js&#39;</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="nx">merge</span><span class="p">(</span><span class="nx">common</span><span class="p">,</span> <span class="p">{</span>
   <span class="nx">mode</span><span class="o">:</span> <span class="s2">&quot;production&quot;</span><span class="p">,</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">config</span>
</pre></div>
</div>
<p>y, por su parte, <code class="file docutils literal notranslate"><span class="pre">webpack.development.js</span></code> esto otro:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">merge</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;webpack-merge&#39;</span><span class="p">),</span>
      <span class="nx">common</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./webpack.common.js&#39;</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="nx">merge</span><span class="p">(</span><span class="nx">common</span><span class="p">,</span> <span class="p">{</span>
   <span class="nx">mode</span><span class="o">:</span> <span class="s2">&quot;development&quot;</span><span class="p">,</span>
   <span class="nx">devtool</span><span class="o">:</span> <span class="s1">&#39;inline-source-map&#39;</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">config</span>
</pre></div>
</div>
<p>Con ello, además del script <code class="docutils literal notranslate"><span class="pre">build</span></code> podemos hacer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ npm run watch
</pre></div>
</div>
<p>que creará el fichero pero se quedará vigilando cualquier cambio en el fichero
fuente para regenerarlo inmediatamente.</p>
</div>
<div class="section" id="aplicacion-simple">
<h2>4.1.4. Aplicación simple<a class="headerlink" href="#aplicacion-simple" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Trataremos ahora de montar una aplicación (bastante inútil, todo sea dicho) que
incluya <abbr title="HyperText Markup Language">HTML</abbr> y <abbr title="Cascading Style Sheets">CSS</abbr> y montarla con <strong class="program">webpack</strong>. En este caso, como se
obtiene como resultado una página web, tiene sentido poder depurar la página de
modo interactivo, esto es, que se levante un servidor web y que la página cambie
automáticamente al realizarse algún cambio en alguno de los ficheros fuente.
Para ello, añadimos un tercer <em>script</em>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;debug&quot;</span><span class="o">:</span> <span class="s2">&quot;webpack-dev-server --config webpack/webpack.development.js&quot;</span>
</pre></div>
</div>
<p>El código fuente se compone de los siguientes ficheros:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>src
 +-- index.html
 |
 +-- js
 |    +-- index.js
 |
 +-- css
      +-- main.css
</pre></div>
</div>
<p>En este caso, deberemos instalar paquetes adicionales:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> npm install --save-dev html-loader html-webpack-plugin
<span class="gp">$</span> npm install --save-dev css-loader mini-css-extract-plugin
<span class="gp">$</span> npm install --save-dev url-loader file-loader
</pre></div>
</div>
<p>Para el <em>script</em> podemos usar el ya escrito, con la adición de una línea que
posibilita el procesamiento del <abbr title="Cascading Style Sheets">CSS</abbr>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="kr">import</span> <span class="s2">&quot;../css/main.css&quot;</span><span class="p">;</span>
</span>
<span class="kr">const</span> <span class="nx">foobar</span> <span class="o">=</span> <span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">text</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">mensaje</span> <span class="o">=</span> <span class="s2">&quot;Esto es una prueba&quot;</span><span class="p">;</span>
<span class="nx">foobar</span><span class="p">(</span><span class="nx">mensaje</span><span class="p">);</span>
<span class="nx">no_existe</span><span class="p">();</span>  <span class="c1">// Esto debe provocar un error en la consola.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p>Hay otra forma de provocar que se procese el fichero <abbr title="Cascading Style Sheets">CSS</abbr> (o
cualquier otro tipo de fichero): añadirlo al punto de entrada de
<strong class="program">webpack</strong>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">entry</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;./src/js/index.js&quot;</span><span class="p">,</span> <span class="s2">&quot;./css/main.css&quot;</span> <span class="p">]</span>
</pre></div>
</div>
<p class="last">Esta alternativa puede ser interesante, si el <abbr title="Cascading Style Sheets">CSS</abbr> procede de código ajeno y
pretendemos crear una configuración condicional que incluya o no en los
ficheros resultantes el código de terceros. Más adelante, puede echarle un
vistazo al <a class="reference internal" href="03.ejemplos.html#webpack-ej-plugin"><span class="std std-ref">ejemplo de construcción de un plugin</span></a> en
que se usa esta técnica. La contraprestación es que la dependencia no está
contenida en el código fuente y, en consecuencia, sólo es patente si se
procesa el desarrollo con <strong class="program">webpack</strong>.</p>
</div>
<p>Hay, ademas, que modificar imperiosamente <code class="file docutils literal notranslate"><span class="pre">webpack/webpack.development.js</span></code> para
alterar el comportamiento de <strong class="program">webpack-dev-server</strong>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">merge</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;webpack-merge&#39;</span><span class="p">),</span>
      <span class="nx">common</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./webpack.common.js&#39;</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="nx">merge</span><span class="p">(</span><span class="nx">common</span><span class="p">,</span> <span class="p">{</span>
   <span class="nx">mode</span><span class="o">:</span> <span class="s2">&quot;development&quot;</span><span class="p">,</span>
<span class="hll">   <span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
</span><span class="hll">      <span class="nx">contentBase</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class="hll">      <span class="nx">open</span><span class="o">:</span> <span class="s2">&quot;chromium&quot;</span>
</span><span class="hll">   <span class="p">},</span>
</span>   <span class="nx">devtool</span><span class="o">:</span> <span class="s1">&#39;inline-source-map&#39;</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">config</span>
</pre></div>
</div>
<p>Para entender esta configuración, es indispensable conocer cómo funciona, en
realidad, <strong class="program">webpack-dev-server</strong>: en principio, sirve desde un directorio
virtual creado en la memoria los ficheros resultantes del procesamiento. En
consecuencia, ni tales ficheros resultantes se escriben en disco ni los ficheros
de disco están disponibles en el servidor web levantado. Ahora bien, la opción
<em>contentBase</em>, permite indicar un directorio del sistema real de ficheros  que
se fusionará con este directorio virtual a fin de que sus contenidos sí sean
accesibles. Si el valor es <code class="docutils literal notranslate"><span class="pre">false</span></code>, como es el caso, sólo se sirven los
ficheros del directorio virtual (o sea, sólo los ficheros resultantes del
procesamiento). Su valor predeterminado es <code class="file docutils literal notranslate"><span class="pre">dist/</span></code>, así que si no se
incluye la opción, estará accesible el contenido de este directorio en caso de
existir. Por supuesto, podemos establecer el valor que queramos, por ejemplo:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">contentBase</span><span class="o">:</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">).</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&quot;..&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>En este caso, fusionaremos todo el contenido del directorio de trabajo<a class="footnote-reference" href="#id4" id="id1">[1]</a> con
los ficheros resultantes. La otra opción, <em>open</em>, rige qué se hace al levantar el
servidor:</p>
<ul>
<li><p class="first">Si es <code class="docutils literal notranslate"><span class="pre">false</span></code>, que es su valor predeterminado al no haber incluido el
argumento <code class="code docutils literal notranslate"><span class="pre">--open</span></code><a class="footnote-reference" href="#id5" id="id2">[2]</a> en el <em>script</em> añadido a <code class="file docutils literal notranslate"><span class="pre">package.json</span></code>, no
se abre una ventana con la aplicación en el navegador, así que tendremos que
abri manualmente nosotros la aplicación en:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span>
</pre></div>
</div>
</li>
<li><p class="first">Si toma valor, debe ser una cadena que indique el navegador con el que se
quiere ver la aplicación.</p>
</li>
<li><p class="first">Si es <code class="docutils literal notranslate"><span class="pre">true</span></code>, se usa el navegador predefinido por el sistema<a class="footnote-reference" href="#id6" id="id3">[3]</a>.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p>Aunque tenga un interés muy relativo, también es posible hacer
que los ficheros resultantes se escriban en disco.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
   <span class="nx">writeToDisk</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
   <span class="nx">contentBase</span><span class="o">:</span> <span class="kc">false</span>
   <span class="nx">open</span><span class="o">:</span> <span class="s2">&quot;chromium&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="last">En este caso, se escribirán los ficheros resultantes en <code class="file docutils literal notranslate"><span class="pre">dist</span></code> (a menos
que lo modifiquemos) y el servidor publicará el contenido de este directorio.</p>
</div>
<p id="webpack-simple-html">Por su parte, <code class="file docutils literal notranslate"><span class="pre">index.html</span></code> puede ser el siguiente:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;es&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Aplicación simple<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Aplicación simple<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Obsérvese que es necesario incluir las etiquetas <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/head">&lt;head&gt;</a> y <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/body">&lt;body&gt;</a> para el
plugin <strong class="program">HtmlWebpackPlugin</strong> inserte correctamente el <em>script</em> dentro del
<abbr title="HyperText Markup Language">HTML</abbr>. Por otro lado. el <abbr title="Cascading Style Sheets">CSS</abbr> es éste:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">body</span> <span class="p">{</span>
   <span class="n">blackground-color</span><span class="p">:</span> <span class="kc">yellow</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Como puede verse, no hay referencia en el <abbr title="HyperText Markup Language">HTML</abbr> ni al <em>script</em> ni a la hoja de
estilos, ya que se pretende que <strong class="program">webpack</strong> se encargue de incorpar las
referencias pertinentes. La configuración, en este caso, debe añadirse a
<code class="file docutils literal notranslate"><span class="pre">webpack/webpack.common.js</span></code>, ya que tanto en producción como en
desarrollo se tendrá que llevar a cabo la tarea:</p>
<div class="highlight-js notranslate" id="webpack-simple"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">HtmlWebPackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;html-webpack-plugin&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">MiniCssExtractPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;mini-css-extract-plugin&quot;</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
   <span class="nx">entry</span><span class="o">:</span> <span class="s2">&quot;./src/js/index.js&quot;</span><span class="p">,</span>
   <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&quot;js/[name].bundle.js&quot;</span>
   <span class="p">},</span>
   <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
         <span class="p">{</span>
            <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.html$/</span><span class="p">,</span>
            <span class="nx">use</span><span class="o">:</span> <span class="p">{</span>
               <span class="nx">loader</span><span class="o">:</span> <span class="s2">&quot;html-loader&quot;</span><span class="p">,</span>
               <span class="nx">options</span><span class="o">:</span> <span class="p">{</span> <span class="nx">minimize</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
            <span class="p">}</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span>
            <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="nx">MiniCssExtractPlugin</span><span class="p">.</span><span class="nx">loader</span><span class="p">,</span>
                  <span class="s2">&quot;css-loader&quot;</span><span class="p">]</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">},</span>
   <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
      <span class="k">new</span> <span class="nx">HtmlWebPackPlugin</span><span class="p">({</span>
         <span class="nx">template</span><span class="o">:</span> <span class="s2">&quot;src/index.html&quot;</span><span class="p">,</span>
         <span class="c1">//filename: &quot;index.html&quot;   // Es el valor predeterminado</span>
      <span class="p">}),</span>
      <span class="k">new</span> <span class="nx">MiniCssExtractPlugin</span><span class="p">({</span>
         <span class="nx">filename</span><span class="o">:</span> <span class="s2">&quot;css/[name].css&quot;</span><span class="p">,</span>
         <span class="nx">chunkFilename</span><span class="o">:</span> <span class="s2">&quot;[id].css&quot;</span>
      <span class="p">})</span>
   <span class="p">]</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">config</span>
</pre></div>
</div>
<p>Podemos ahora generar el resultado con:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ npm run build
</pre></div>
</div>
<p>pero como en esta ocasión sí tenemos un <abbr title="HyperText Markup Language">HTML</abbr>, podría interesarnos levantar un
servidor web y recargar la aplicación cada vez que hagamos un cambio en el
código fuente:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ npm run debug
</pre></div>
</div>
<p>Además, gracias a que hemos incluido la línea:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">devtool</span><span class="p">:</span> <span class="s1">&#39;inline-source-map&#39;</span>
</pre></div>
</div>
<p>los errores que genere la ejecución del código (en nuestro ejemplo hemos
incluido una línea que hace referencia a una función inexistente) referirán los
ficheros originales (<code class="file docutils literal notranslate"><span class="pre">src/js/index.js</span></code>) e incluso podremos fijar sobre
ellos puntos de ruptura para llevar a cabo la depuración del código.</p>
<p>Por defecto, los mapeos se escriben como comentarios dentro de los propios
ficheros <code class="docutils literal notranslate"><span class="pre">.js</span></code>. Podemos hacer que se escriban en fichero aparte modificando
la configuración:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">merge</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;webpack-merge&#39;</span><span class="p">),</span>
      <span class="nx">common</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./webpack.common.js&#39;</span><span class="p">),</span>
      <span class="nx">webpack</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;webpack&quot;</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="nx">merge</span><span class="p">(</span><span class="nx">common</span><span class="p">,</span> <span class="p">{</span>
   <span class="nx">mode</span><span class="o">:</span> <span class="s2">&quot;development&quot;</span><span class="p">,</span>
   <span class="nx">devtool</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
   <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
      <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">SourceMapDevToolPlugin</span><span class="p">({</span>
         <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;js/[name].js.map&#39;</span>
      <span class="p">})</span>
   <span class="p">]</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">config</span>
</pre></div>
</div>
<p class="rubric">Enlaces de interés</p>
<ul class="simple">
<li>En el interesante <a class="reference external" href="https://www.valentinog.com/blog/">blog de Valentino Gagliardi</a> hay una entrada de <a class="reference external" href="https://www.valentinog.com/blog/webpack/">introducción a
Webpack4</a> y otra para describir
<a class="reference external" href="https://www.valentinog.com/blog/from-gulp-to-webpack-4-tutorial/">cómo hacer con Webpack4 tareas que se hacen con Gulp</a> y que
puede informar de algunos aspectos adicionales a los explicados en la primera
entrada</li>
</ul>
<p class="rubric">Notas al pie</p>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Tengamos presente que <code class="code docutils literal notranslate"><span class="pre">__dirname</span></code> es <code class="file docutils literal notranslate"><span class="pre">webpack</span></code>, ya que la
configuración se encuentra en <code class="file docutils literal notranslate"><span class="pre">webpack/webpack.development.js</span></code>.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td><p class="first">Si se usa <code class="code docutils literal notranslate"><span class="pre">--open</span></code> sin argumento adicional:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;debug&quot;</span><span class="o">:</span> <span class="s2">&quot;webpack-dev-server --mode development --open&quot;</span>
</pre></div>
</div>
<p>tomará como valor <code class="code docutils literal notranslate"><span class="pre">true</span></code>. Sin embargo, puedo añadirse el navegador que
se quiere usar:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;debug&quot;</span><span class="o">:</span> <span class="s2">&quot;webpack-dev-server --mode development --open chromium&quot;</span>
</pre></div>
</div>
<p class="last">Se prefiere, no obstante, no incluir el argumento y darle valor a <em>open</em> a
través de la configuración.</p>
</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td><p class="first">En los sistemas <em>linux</em>, el navegador predefinido es el que se obtiene
así:</p>
<div class="last highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> xdg-settings get default-web-browser
<span class="go">firefox-esr.desktop</span>
</pre></div>
</div>
</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">4.1. Configuración básica</a><ul>
<li><a class="reference internal" href="#paquetes">4.1.1. Paquetes</a></li>
<li><a class="reference internal" href="#bases-la-de-configuracion">4.1.2. Bases la de configuración</a></li>
<li><a class="reference internal" href="#desarrollo">4.1.3. Desarrollo</a></li>
<li><a class="reference internal" href="#aplicacion-simple">4.1.4. Aplicación simple</a></li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="index.html"
                        title="capítulo anterior">4. Programación en el cliente (Webpack)</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="02.part.html"
                        title="próximo capítulo">4.2. Particularidades</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/04.client/01.intro.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Ir a" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="02.part.html" title="4.2. Particularidades"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="4. Programación en el cliente (Webpack)"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">documentación de Javascript - </a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >4. Programación en el cliente (Webpack)</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Derechos de autor 2019, José Miguel Sánchez Alés.
      Creado con <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>